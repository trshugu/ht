<!DOCTYPE html><html><head><meta content="text/html" charset="utf-8"><meta name="viewport" content="width=250"><title>インフルエンザ雰囲気チェッカー</title>
<style type="text/css">
body {width: 250px};
.ale {color:#f00};
</style>
<script type="text/javascript" src="http://coffeescript.org/v2/browser-compiler/coffeescript.js"></script>
<script type="text/coffeescript">
@august = (t)-> Math.ceil(6.1078 * 10 ** ( (7.5 * t) / (t + 237.3) ) * 1000, 2) / 1000
@tetens = (t)-> Math.ceil(  (217 * august(t)) / (t + 273.15) * 1000, 2) / 1000
@checkInfluenza = (t, h)->
  res = {}
  wm = tetens t
  wa = wm * (h / 100)
  hm =  Math.ceil((11 / wm) * 100)
  hn = hm - h
  msg = ""
  
  if wa >= 11
    status = "安全"
  else
    status = "危険"
    msg = hn + "%不足しています"
  
  res.wm = Math.floor(wm)
  res.wa = Math.floor(wa)
  res.hm = hm
  res.hn = hn
  res.status = status
  res.msg = msg
  res

@ev = ()->
  t = document.chk.temp.selectedIndex
  h = document.chk.humi.selectedIndex
  param = checkInfluenza t, h

  string = param.status + "です\n"
  string += "温度:" + t + "/湿度:" + h + "\n"
  string += "水分量:" + param.wa + "/" + param.wm + "→" + "必要湿度:" + param.hm + "%"
  string += "\n" + param.msg if param.msg != "" 
  
  document.getElementsByClassName("message")[0].innerText = string
</script>


</head>
<body><div class="input"><form name="chk">
温度<select name="temp"><option label="0" value="0">0</option><option label="1" value="1">1</option><option label="2" value="2">2</option><option label="3" value="3">3</option><option label="4" value="4">4</option><option label="5" value="5">5</option><option label="6" value="6">6</option><option label="7" value="7">7</option><option label="8" value="8">8</option><option label="9" value="9">9</option><option label="10" value="10">10</option><option label="11" value="11">11</option><option label="12" value="12">12</option><option label="13" value="13">13</option><option label="14" value="14">14</option><option label="15" value="15">15</option><option label="16" value="16">16</option><option label="17" value="17">17</option><option label="18" value="18">18</option><option label="19" value="19">19</option><option label="20" value="20">20</option><option label="21" value="21">21</option><option label="22" value="22">22</option><option label="23" value="23">23</option><option label="24" value="24">24</option><option label="25" value="25" selected="selected">25</option><option label="26" value="26">26</option><option label="27" value="27">27</option><option label="28" value="28">28</option><option label="29" value="29">29</option><option label="30" value="30">30</option><option label="31" value="31">31</option><option label="32" value="32">32</option><option label="33" value="33">33</option><option label="34" value="34">34</option><option label="35" value="35">35</option><option label="36" value="36">36</option><option label="37" value="37">37</option><option label="38" value="38">38</option><option label="39" value="39">39</option><option label="40" value="40">40</option><option label="41" value="41">41</option><option label="42" value="42">42</option><option label="43" value="43">43</option><option label="44" value="44">44</option><option label="45" value="45">45</option><option label="46" value="46">46</option><option label="47" value="47">47</option><option label="48" value="48">48</option><option label="49" value="49">49</option><option label="50" value="50">50</option><option label="51" value="51">51</option><option label="52" value="52">52</option><option label="53" value="53">53</option><option label="54" value="54">54</option><option label="55" value="55">55</option><option label="56" value="56">56</option><option label="57" value="57">57</option><option label="58" value="58">58</option><option label="59" value="59">59</option><option label="60" value="60">60</option></select> 
湿度<select name="humi"><option label="0" value="0">0</option><option label="1" value="1">1</option><option label="2" value="2">2</option><option label="3" value="3">3</option><option label="4" value="4">4</option><option label="5" value="5">5</option><option label="6" value="6">6</option><option label="7" value="7">7</option><option label="8" value="8">8</option><option label="9" value="9">9</option><option label="10" value="10">10</option><option label="11" value="11">11</option><option label="12" value="12">12</option><option label="13" value="13">13</option><option label="14" value="14">14</option><option label="15" value="15">15</option><option label="16" value="16">16</option><option label="17" value="17">17</option><option label="18" value="18">18</option><option label="19" value="19">19</option><option label="20" value="20">20</option><option label="21" value="21">21</option><option label="22" value="22">22</option><option label="23" value="23">23</option><option label="24" value="24">24</option><option label="25" value="25">25</option><option label="26" value="26">26</option><option label="27" value="27">27</option><option label="28" value="28">28</option><option label="29" value="29">29</option><option label="30" value="30">30</option><option label="31" value="31">31</option><option label="32" value="32">32</option><option label="33" value="33">33</option><option label="34" value="34">34</option><option label="35" value="35">35</option><option label="36" value="36">36</option><option label="37" value="37">37</option><option label="38" value="38">38</option><option label="39" value="39">39</option><option label="40" value="40">40</option><option label="41" value="41">41</option><option label="42" value="42">42</option><option label="43" value="43">43</option><option label="44" value="44">44</option><option label="45" value="45">45</option><option label="46" value="46">46</option><option label="47" value="47">47</option><option label="48" value="48">48</option><option label="49" value="49">49</option><option label="50" value="50" selected="selected">50</option><option label="51" value="51">51</option><option label="52" value="52">52</option><option label="53" value="53">53</option><option label="54" value="54">54</option><option label="55" value="55">55</option><option label="56" value="56">56</option><option label="57" value="57">57</option><option label="58" value="58">58</option><option label="59" value="59">59</option><option label="60" value="60">60</option><option label="61" value="61">61</option><option label="62" value="62">62</option><option label="63" value="63">63</option><option label="64" value="64">64</option><option label="65" value="65">65</option><option label="66" value="66">66</option><option label="67" value="67">67</option><option label="68" value="68">68</option><option label="69" value="69">69</option><option label="70" value="70">70</option><option label="71" value="71">71</option><option label="72" value="72">72</option><option label="73" value="73">73</option><option label="74" value="74">74</option><option label="75" value="75">75</option><option label="76" value="76">76</option><option label="77" value="77">77</option><option label="78" value="78">78</option><option label="79" value="79">79</option><option label="80" value="80">80</option><option label="81" value="81">81</option><option label="82" value="82">82</option><option label="83" value="83">83</option><option label="84" value="84">84</option><option label="85" value="85">85</option><option label="86" value="86">86</option><option label="87" value="87">87</option><option label="88" value="88">88</option><option label="89" value="89">89</option><option label="90" value="90">90</option><option label="91" value="91">91</option><option label="92" value="92">92</option><option label="93" value="93">93</option><option label="94" value="94">94</option><option label="95" value="95">95</option><option label="96" value="96">96</option><option label="97" value="97">97</option><option label="98" value="98">98</option><option label="99" value="99">99</option><option label="100" value="100">100</option></select>                              <button type="button" value="sub" onclick="ev(this);return false">sub         </button></form></div>
<div class="message"></div>
</body></html>
